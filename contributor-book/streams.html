<!DOCTYPE html>
<html lang="English">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Streams | NuShell</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="A new type of shell.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/nushell_website/assets/css/0.styles.418b3dc3.css" as="style"><link rel="preload" href="/nushell_website/assets/js/app.4368b0a8.js" as="script"><link rel="preload" href="/nushell_website/assets/js/2.97f0a886.js" as="script"><link rel="preload" href="/nushell_website/assets/js/37.18e3470c.js" as="script"><link rel="prefetch" href="/nushell_website/assets/js/10.979eff6c.js"><link rel="prefetch" href="/nushell_website/assets/js/100.96b16fe1.js"><link rel="prefetch" href="/nushell_website/assets/js/101.49a99931.js"><link rel="prefetch" href="/nushell_website/assets/js/102.39643731.js"><link rel="prefetch" href="/nushell_website/assets/js/103.2419643f.js"><link rel="prefetch" href="/nushell_website/assets/js/104.d6fbc2ac.js"><link rel="prefetch" href="/nushell_website/assets/js/105.81d4fb12.js"><link rel="prefetch" href="/nushell_website/assets/js/106.d14abca2.js"><link rel="prefetch" href="/nushell_website/assets/js/107.28c60b61.js"><link rel="prefetch" href="/nushell_website/assets/js/108.90427b9e.js"><link rel="prefetch" href="/nushell_website/assets/js/109.f3681144.js"><link rel="prefetch" href="/nushell_website/assets/js/11.8a53c31d.js"><link rel="prefetch" href="/nushell_website/assets/js/110.5fa411d8.js"><link rel="prefetch" href="/nushell_website/assets/js/111.4e3e0371.js"><link rel="prefetch" href="/nushell_website/assets/js/112.575d2e51.js"><link rel="prefetch" href="/nushell_website/assets/js/113.9e82afa2.js"><link rel="prefetch" href="/nushell_website/assets/js/114.3930b2f8.js"><link rel="prefetch" href="/nushell_website/assets/js/115.46c65be5.js"><link rel="prefetch" href="/nushell_website/assets/js/116.c164680c.js"><link rel="prefetch" href="/nushell_website/assets/js/117.a724ed06.js"><link rel="prefetch" href="/nushell_website/assets/js/118.e74ea99d.js"><link rel="prefetch" href="/nushell_website/assets/js/119.865c2fa1.js"><link rel="prefetch" href="/nushell_website/assets/js/12.599150a1.js"><link rel="prefetch" href="/nushell_website/assets/js/120.f86272d1.js"><link rel="prefetch" href="/nushell_website/assets/js/121.2865363b.js"><link rel="prefetch" href="/nushell_website/assets/js/13.b7ada105.js"><link rel="prefetch" href="/nushell_website/assets/js/14.5c4ee028.js"><link rel="prefetch" href="/nushell_website/assets/js/15.2a3d74d3.js"><link rel="prefetch" href="/nushell_website/assets/js/16.916e0717.js"><link rel="prefetch" href="/nushell_website/assets/js/17.666b5cee.js"><link rel="prefetch" href="/nushell_website/assets/js/18.087d0be8.js"><link rel="prefetch" href="/nushell_website/assets/js/19.15bd9858.js"><link rel="prefetch" href="/nushell_website/assets/js/20.086b0c67.js"><link rel="prefetch" href="/nushell_website/assets/js/21.fa97a05c.js"><link rel="prefetch" href="/nushell_website/assets/js/22.c2adb65e.js"><link rel="prefetch" href="/nushell_website/assets/js/23.9bc02e82.js"><link rel="prefetch" href="/nushell_website/assets/js/24.c73f7238.js"><link rel="prefetch" href="/nushell_website/assets/js/25.15bc4262.js"><link rel="prefetch" href="/nushell_website/assets/js/26.99d7d862.js"><link rel="prefetch" href="/nushell_website/assets/js/27.8e743932.js"><link rel="prefetch" href="/nushell_website/assets/js/28.d87539de.js"><link rel="prefetch" href="/nushell_website/assets/js/29.df90be33.js"><link rel="prefetch" href="/nushell_website/assets/js/3.e6ef19ae.js"><link rel="prefetch" href="/nushell_website/assets/js/30.d860a04e.js"><link rel="prefetch" href="/nushell_website/assets/js/31.ebdb1384.js"><link rel="prefetch" href="/nushell_website/assets/js/32.f14e6022.js"><link rel="prefetch" href="/nushell_website/assets/js/33.93f52901.js"><link rel="prefetch" href="/nushell_website/assets/js/34.8d37de33.js"><link rel="prefetch" href="/nushell_website/assets/js/35.9a17d268.js"><link rel="prefetch" href="/nushell_website/assets/js/36.5f9931a5.js"><link rel="prefetch" href="/nushell_website/assets/js/38.c5dc6d86.js"><link rel="prefetch" href="/nushell_website/assets/js/39.ba3241c6.js"><link rel="prefetch" href="/nushell_website/assets/js/4.09fd2c39.js"><link rel="prefetch" href="/nushell_website/assets/js/40.b1b2e180.js"><link rel="prefetch" href="/nushell_website/assets/js/41.c5058721.js"><link rel="prefetch" href="/nushell_website/assets/js/42.2e364993.js"><link rel="prefetch" href="/nushell_website/assets/js/43.9eaeebf3.js"><link rel="prefetch" href="/nushell_website/assets/js/44.581adddf.js"><link rel="prefetch" href="/nushell_website/assets/js/45.8ab2711f.js"><link rel="prefetch" href="/nushell_website/assets/js/46.c20f1cdd.js"><link rel="prefetch" href="/nushell_website/assets/js/47.96e4de2a.js"><link rel="prefetch" href="/nushell_website/assets/js/48.b712c6b9.js"><link rel="prefetch" href="/nushell_website/assets/js/49.b783561d.js"><link rel="prefetch" href="/nushell_website/assets/js/5.fc791712.js"><link rel="prefetch" href="/nushell_website/assets/js/50.c2947a59.js"><link rel="prefetch" href="/nushell_website/assets/js/51.1a20b983.js"><link rel="prefetch" href="/nushell_website/assets/js/52.810175df.js"><link rel="prefetch" href="/nushell_website/assets/js/53.991531db.js"><link rel="prefetch" href="/nushell_website/assets/js/54.b26d48bc.js"><link rel="prefetch" href="/nushell_website/assets/js/55.39eb2e90.js"><link rel="prefetch" href="/nushell_website/assets/js/56.026223d0.js"><link rel="prefetch" href="/nushell_website/assets/js/57.21cf8a41.js"><link rel="prefetch" href="/nushell_website/assets/js/58.c3c8fded.js"><link rel="prefetch" href="/nushell_website/assets/js/59.b83ef730.js"><link rel="prefetch" href="/nushell_website/assets/js/6.ffe6f60a.js"><link rel="prefetch" href="/nushell_website/assets/js/60.4cccd2a2.js"><link rel="prefetch" href="/nushell_website/assets/js/61.23a899d1.js"><link rel="prefetch" href="/nushell_website/assets/js/62.8d998b7b.js"><link rel="prefetch" href="/nushell_website/assets/js/63.e64ab01e.js"><link rel="prefetch" href="/nushell_website/assets/js/64.7731acd4.js"><link rel="prefetch" href="/nushell_website/assets/js/65.8e495daf.js"><link rel="prefetch" href="/nushell_website/assets/js/66.b4821747.js"><link rel="prefetch" href="/nushell_website/assets/js/67.c5f8f256.js"><link rel="prefetch" href="/nushell_website/assets/js/68.44bb37af.js"><link rel="prefetch" href="/nushell_website/assets/js/69.cb244a44.js"><link rel="prefetch" href="/nushell_website/assets/js/7.57ef8c8c.js"><link rel="prefetch" href="/nushell_website/assets/js/70.9f2c26d4.js"><link rel="prefetch" href="/nushell_website/assets/js/71.2fe12f0e.js"><link rel="prefetch" href="/nushell_website/assets/js/72.16bafa16.js"><link rel="prefetch" href="/nushell_website/assets/js/73.3547034a.js"><link rel="prefetch" href="/nushell_website/assets/js/74.764ce66c.js"><link rel="prefetch" href="/nushell_website/assets/js/75.a4dc217b.js"><link rel="prefetch" href="/nushell_website/assets/js/76.a331369a.js"><link rel="prefetch" href="/nushell_website/assets/js/77.b727b1c4.js"><link rel="prefetch" href="/nushell_website/assets/js/78.09aa9151.js"><link rel="prefetch" href="/nushell_website/assets/js/79.fd6d46d6.js"><link rel="prefetch" href="/nushell_website/assets/js/8.eea5e574.js"><link rel="prefetch" href="/nushell_website/assets/js/80.d560ae23.js"><link rel="prefetch" href="/nushell_website/assets/js/81.62ec3092.js"><link rel="prefetch" href="/nushell_website/assets/js/82.aac7a422.js"><link rel="prefetch" href="/nushell_website/assets/js/83.32e04de9.js"><link rel="prefetch" href="/nushell_website/assets/js/84.1b6115b9.js"><link rel="prefetch" href="/nushell_website/assets/js/85.9c576c20.js"><link rel="prefetch" href="/nushell_website/assets/js/86.34f4cfee.js"><link rel="prefetch" href="/nushell_website/assets/js/87.1574913c.js"><link rel="prefetch" href="/nushell_website/assets/js/88.a76f2c7c.js"><link rel="prefetch" href="/nushell_website/assets/js/89.f963b373.js"><link rel="prefetch" href="/nushell_website/assets/js/9.1e08c56a.js"><link rel="prefetch" href="/nushell_website/assets/js/90.6fd14860.js"><link rel="prefetch" href="/nushell_website/assets/js/91.316d3494.js"><link rel="prefetch" href="/nushell_website/assets/js/92.741a9558.js"><link rel="prefetch" href="/nushell_website/assets/js/93.9117e7ad.js"><link rel="prefetch" href="/nushell_website/assets/js/94.2fa88374.js"><link rel="prefetch" href="/nushell_website/assets/js/95.ea13edf2.js"><link rel="prefetch" href="/nushell_website/assets/js/96.f74db186.js"><link rel="prefetch" href="/nushell_website/assets/js/97.30a4c9ea.js"><link rel="prefetch" href="/nushell_website/assets/js/98.4ed89675.js"><link rel="prefetch" href="/nushell_website/assets/js/99.eeac325c.js">
    <link rel="stylesheet" href="/nushell_website/assets/css/0.styles.418b3dc3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nushell_website/" class="home-link router-link-active"><!----> <span class="site-name">NuShell</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nushell_website/book/" class="nav-link">
  Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nushell_website/contributor-book/streams.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/es/" class="nav-link">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/ja/" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/pt-BR/contributor-book/streams.html" class="nav-link">
  Português do Brasil
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/zh-cn/" class="nav-link">
  中文
</a></li></ul></div></div> <a href="https://github.com/nushell/nushell" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nushell_website/book/" class="nav-link">
  Book
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nushell_website/contributor-book/streams.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/es/" class="nav-link">
  Español
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/ja/" class="nav-link">
  日本語
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/pt-BR/contributor-book/streams.html" class="nav-link">
  Português do Brasil
</a></li><li class="dropdown-item"><!----> <a href="/nushell_website/zh-cn/" class="nav-link">
  中文
</a></li></ul></div></div> <a href="https://github.com/nushell/nushell" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="streams"><a href="#streams" class="header-anchor">#</a> Streams</h1> <p>Async streams form the foundation for how information flows from one end of the pipeline to the other. This allows nu to work with internal commands, external commands, and plugins in a way that's relatively seamless.</p> <p>There are two fundamental types for streams in Nu: InputStream and OutputStream</p> <h2 id="inputstream"><a href="#inputstream" class="header-anchor">#</a> InputStream</h2> <p>Let's look at the InputStream type a little closer:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token class-name">BoxStream</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'static</span><span class="token punctuation">,</span> <span class="token class-name">Tagged</span><span class="token operator">&lt;</span><span class="token class-name">Value</span><span class="token operator">&gt;&gt;</span>
</code></pre></div><p>That is, it's an async stream which will send <code>Tagged&lt;Value&gt;</code> into the command. For more information about tagging, see the chapter on <a href="/nushell_website/contributor-book/metadata.html">metadata</a>.</p> <h2 id="outputstream"><a href="#outputstream" class="header-anchor">#</a> OutputStream</h2> <p>Similar to InputStream above, an Output stream will return values from a command:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token class-name">BoxStream</span><span class="token operator">&lt;</span><span class="token lifetime-annotation symbol">'static</span><span class="token punctuation">,</span> <span class="token class-name">ReturnValue</span><span class="token operator">&gt;</span>
</code></pre></div><p>Where a ReturnValue is:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">type</span> <span class="token class-name">ReturnValue</span> <span class="token operator">=</span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">ReturnSuccess</span><span class="token punctuation">,</span> <span class="token class-name">ShellError</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>And a ReturnSuccess is:</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">pub</span> <span class="token keyword">enum</span> <span class="token type-definition class-name">ReturnSuccess</span> <span class="token punctuation">{</span>
    <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token class-name">Tagged</span><span class="token operator">&lt;</span><span class="token class-name">Value</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">Action</span><span class="token punctuation">(</span><span class="token class-name">CommandAction</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Why is OutputStream different from InputStream? This comes down to a few differences in needs of the two ends of the stream. By the time data has gotten to the command, it's already been checked for any errors, so it's expected to be a pure data stream.</p> <p>Output streams, on the other hand, have to be able to return two other types of data in addition to values: errors and actions.</p> <h3 id="errors"><a href="#errors" class="header-anchor">#</a> Errors</h3> <p>Errors that are passed down the stream will be detected as values are copied from one command to another. Once the error is detected, it will halt the streams progress and display an error.</p> <h3 id="actions"><a href="#actions" class="header-anchor">#</a> Actions</h3> <p>An action differs from a value in that where a value is a bit of data that the next command in the pipeline will see, an action is something intended only for the core Nu runtime. Actions will change the state of the shell itself by, for example, changing the current path, changing the current shell, updating internal side tables, and so on.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nushell/nushell/edit/master/docs/contributor-book/streams.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/nushell_website/assets/js/app.4368b0a8.js" defer></script><script src="/nushell_website/assets/js/2.97f0a886.js" defer></script><script src="/nushell_website/assets/js/37.18e3470c.js" defer></script>
  </body>
</html>
